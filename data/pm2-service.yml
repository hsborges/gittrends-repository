apps:
  - name: queue-board
    cwd: packages/service
    script: dist/extra/queue-board.js

  - name: proxy-server
    cwd: packages/service
    script: node_modules/.bin/github-proxy-server
    args: --request-interval 100 --tokens ../../data/tokens.txt
    env:
      PORT: 3000

  - name: scheduler
    cwd: packages/service
    interpreter_args: -r @gittrends/env-config
    script: dist/scheduler.js
    args: all
    instance_var: INSTANCE_ID
    cron_restart: '0 */4 * * *'
    autorestart: false

  - name: updater
    cwd: packages/service
    interpreter_args: -r @gittrends/env-config
    script: dist/updater.js
    args: --workers 1
    instances: 1
    instance_var: INSTANCE_ID
    env:
      GITTRENDS_PROXY_PORT: 3000
